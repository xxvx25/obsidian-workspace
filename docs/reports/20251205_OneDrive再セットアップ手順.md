# OneDrive 再セットアップ手順（2025-12-05）

## 目的
- OneDrive クライアントの設定・キャッシュを初期化し、クリーンな状態で再同期を開始する。
- ローカルの Git リポジトリはすべて OneDrive 外に移動済みのため、同期対象は必要最低限のドキュメントのみ。

## 実施済み (2025-12-05)
- OneDrive プロセス停止: `pkill -f OneDrive`
- 設定・キャッシュ退避（削除ではなくバックアップ）  
  - `~/Library/Group Containers/UBF8T346G9.OneDriveSyncClientSuite` → `...Suite.bak.20251205_164110`  
  - `~/Library/Containers/com.microsoft.OneDrive-mac/Data/Library/Application Support/OneDrive/settings` → `.../settings.bak.20251205_164222`  
  - `~/Library/Containers/com.microsoft.OneDrive-mac/Data/Library/Application Support/OneDrive/SQM` → `.../SQM.bak.20251205_164222`  
  - `~/Library/Caches/OneDrive` は存在しなかった  
- コンテナ本体 `~/Library/Containers/com.microsoft.OneDrive-mac` は OS 保護で移動不可だが、中の設定は空状態。

## 実施済み (2025-12-06)
1. ✅ **OneDrive 再起動 & サインイン**  
   - `/Applications/Microsoft OneDrive.app` を起動し、サインイン完了。
2. ✅ **同期フォルダの指定**  
   - 同期先は既存の `~/Library/CloudStorage/OneDrive-個人用/` を使用（新規パス指定は不要だった）。
   - データ移行は不要（既存フォルダをそのまま使用）。
3. ✅ **同期対象の絞り込み**  
   - セットアップ時に同期対象を最小限に設定済み。
4. ✅ **動作確認**  
   - メニューバーのアイコンがチェック状態を確認。
   - 競合確認: `find ~/Library/CloudStorage/OneDrive-個人用 -name "*conflict*"` → 実際の競合ファイルなし（PDFファイル名に "conflict" が含まれるものは検出されたが、OneDriveの競合ファイルではない）。
   - 同期が正常に動作していることを確認。

## もし元に戻したい場合
- 上記 `.bak.*` を元のディレクトリ名に戻す。  
- OneDrive が起動している場合は先に終了してから戻す。
