# OneDrive 再セットアップ手順（2025-12-05）

## 目的
- OneDrive クライアントの設定・キャッシュを初期化し、クリーンな状態で再同期を開始する。
- ローカルの Git リポジトリはすべて OneDrive 外に移動済みのため、同期対象は必要最低限のドキュメントのみ。

## 実施済み (2025-12-05)
- OneDrive プロセス停止: `pkill -f OneDrive`
- 設定・キャッシュ退避（削除ではなくバックアップ）  
  - `~/Library/Group Containers/UBF8T346G9.OneDriveSyncClientSuite` → `...Suite.bak.20251205_164110`  
  - `~/Library/Containers/com.microsoft.OneDrive-mac/Data/Library/Application Support/OneDrive/settings` → `.../settings.bak.20251205_164222`  
  - `~/Library/Containers/com.microsoft.OneDrive-mac/Data/Library/Application Support/OneDrive/SQM` → `.../SQM.bak.20251205_164222`  
  - `~/Library/Caches/OneDrive` は存在しなかった  
- コンテナ本体 `~/Library/Containers/com.microsoft.OneDrive-mac` は OS 保護で移動不可だが、中の設定は空状態。

## これから行う手順
1. **OneDrive 再起動 & サインイン**  
   - `/Applications/Microsoft OneDrive.app` を起動し、サインイン。
2. **同期フォルダの指定**  
   - 既存フォルダ上書きを避けるため、例: `~/Library/CloudStorage/OneDrive-個人用-new` のように新規パスを指定。  
   - 同期完了後に旧フォルダと差分を確認して必要なファイルを移動する。
3. **同期対象の絞り込み**  
   - セットアップの「フォルダーの選択」で最小限に。  
   - 大容量・多数ファイルは外し、必要なもののみ「このデバイス上に常に保持」に設定。
4. **動作確認**  
   - メニューバーのアイコンがチェック状態になるか確認。  
   - 競合確認: `find ~/Library/CloudStorage/OneDrive-個人用-new -name \"*conflict*\"`  
   - しばらく負荷・クラッシュがないか監視。

## もし元に戻したい場合
- 上記 `.bak.*` を元のディレクトリ名に戻す。  
- OneDrive が起動している場合は先に終了してから戻す。
